# ==== Local run configuration ====
server.port=8080

# BLUE connection string:  Set AZURE_SERVICEBUS_SOURCE_CONNECTION_STRING environment variable
# GREEN connection string: Set AZURE_SERVICEBUS_DEST_CONNECTION_STRING environment variable
# >> Redis: Set SPRING_DATA_REDIS_HOST, SPRING_DATA_REDIS_PASSWORD environment variables

# --- Azure Service Bus (Source: BLUE) ---
azure.servicebus.source.connection-string=${AZURE_SERVICEBUS_SOURCE_CONNECTION_STRING:}
azure.servicebus.source.queue=${AZURE_SERVICEBUS_SOURCE_QUEUE:orders-scheduled-blue}

# --- Azure Service Bus (Destination: GREEN) ---
azure.servicebus.dest.connection-string=${AZURE_SERVICEBUS_DEST_CONNECTION_STRING:}
azure.servicebus.dest.queue=${AZURE_SERVICEBUS_DEST_QUEUE:orders-scheduled-green}

# Optional "dead letter" catch-all (regular queue used for POC)
azure.servicebus.error.queue=${AZURE_SERVICEBUS_ERROR_QUEUE:poc-dead-letter}

# --- Redis Configuration ---
spring.data.redis.host=${SPRING_DATA_REDIS_HOST:localhost}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.password=${SPRING_DATA_REDIS_PASSWORD:}
spring.data.redis.ssl.enabled=${SPRING_DATA_REDIS_SSL_ENABLED:false}
spring.data.redis.database=${SPRING_DATA_REDIS_DATABASE:0}

# --- App Configuration ---
app.defaultScheduleDelaySeconds=${APP_DEFAULT_SCHEDULE_DELAY_SECONDS:3600}
app.validation.peekCount=${APP_VALIDATION_PEEK_COUNT:10}

# --- Debug Configuration ---
debug.enabled=${DEBUG_ENABLED:true}

# Reduce Azure SDK logging noise
logging.level.com.azure.core.amqp=WARN
logging.level.com.azure.messaging.servicebus=WARN
logging.level.com.azure.core.amqp.implementation=ERROR

# Keep your application logs clean
logging.level.com.example.messagetransfer=INFO
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# === DEBUG CONFIGURATION FOR TIMING ISSUES ===
# Enable detailed timing analysis
debug.message.timing=${DEBUG_MESSAGE_TIMING:true}
debug.queue.analysis=${DEBUG_QUEUE_ANALYSIS:true}

# Additional timing logging
logging.level.com.example.messagetransfer.service.ServiceBusSchedulerService=DEBUG